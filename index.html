<!DOCTYPE html>
<html>

  <head>

    <title>Arnam Speak</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  </head>

  <body style="font-family: sans-serif">

    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <div class="container">
        <a href="" class="navbar-brand">Arnam Speak</a>
      </div>
    </nav>

    <div class="container pt-4">

      <textarea class="form-control" id="speak" rows="10" cols="100" style="font-family: sans-serif"></textarea>

      <button class="btn btn-primary my-3" id="translate">Translate!</button>

      <textarea class="form-control" id="result" rows="10" cols="100" style="font-family: sans-serif"></textarea>

    </div>

    <script>

      Array.prototype.random = function () {
        return this[Math.floor((Math.random()*this.length))];
      }

      let replacements = [
        {
          "match": /\bthe\b/i,
          "replace": [
            "th'",
            "t'",
          ]
        },
        {
          "match": /'t\b/i,
          "replace": ["'"]
        },
        {
          "match": /\b([a-z]+)ttle([a-z]*)\b/i,
          "replace": ["$1'tle$2"]
        },
        {
          "match": /\bget\b/i,
          "replace": ["get", "git"]
        },
        {
          "match": /\bfigure\b/i,
          "replace": ["figger"]
        },
        {
          "match": /\bregular\b/i,
          "replace": ["reg'ler"]
        },
        {
          "match": /\bappreciated\b/i,
          "replace": ["'preciated"]
        },
        {
          "match": /\byou'll\b/i,
          "replace": ["y'll"]
        },
        {
          "match": /\byou all\b/i,
          "replace": ["y'all"]
        },
        {
          "match": /\bwant to\b/i,
          "replace": ["wanna"]
        },
        {
          "match": /\bthat will\b/i,
          "replace": ["tha'll"]
        },
        {
          "match": /\bcaptain\b/i,
          "replace": ["cap'n"]
        },
        {
          "match": /\byou're\b/i,
          "replace": ["yer"]
        },
        {
          "match": /\byou\b/i,
          "replace": ["ya"]
        },
        {
          "match": /\byour\b/i,
          "replace": ["yer"]
        },
        {
          "match": /\band\b/i,
          "replace": ["an'", "n'"]
        },
        {
          "match": /\bcan\b/i,
          "replace": ["c'n", "can"]
        },
        {
          "match": /\babout\b/i,
          "replace": ["'bout"]
        },
        {
          "match": /\bthat's\b/i,
          "replace": ["thas"]
        },
        {
          "match": /\bthat\b/i,
          "replace": ["tha'"]
        },
        {
          "match": /\bif(?!')\b/i,
          "replace": ["if'n"]
        },
        {
          "match": /\bi'm\b/i,
          "replace": ["'m"]
        },
        {
          "match": /\bat\b/i,
          "replace": ["a'"]
        },
        {
          "match": /\bof\b/i,
          "replace": ["a'"]
        },
        {
          "match": /\bher\b/i,
          "replace": ["'er"]
        },
        {
          "match": /\bdon't\b/i,
          "replace": ["don'"]
        },
        {
          "match": /\bgot to\b/i,
          "replace": ["gotta"]
        },
        {
          "match": /\bgoing to\b/i,
          "replace": ["gonna"]
        },
        {
          "match": /ing\b/i,
          "replace": ["in'"]
        },
        {
          "match": /\bwhatever\b/i,
          "replace": ["wh'ever"]
        },
        {
          "match": /\bwhat\b/i,
          "replace": ["wha'"]
        },
        {
          "match": /\bour\b/i,
          "replace": ["ar"]
        },
        {
          "match": /\bover/i,
          "replace": ["o'er"]
        },
        {
          "match": /\bout\b/i,
          "replace": ["ou'"]
        },
        {
          "match": /\bto\b/i,
          "replace": ["t'"]
        },
        {
          "match": /\bgenerous\b/i,
          "replace": ["gen'rous"]
        },
        {
          "match": /\bsuggest\b/i,
          "replace": ["su'gest"]
        },
        {
          "match": /\bfor\b/i,
          "replace": ["fer"]
        },
        {
          "match": /\swill\b/i,
          "replace": ["'ll"]
        },
      ]

      document.getElementById('translate').onclick = function (e) {
        let input = document.getElementById('speak').value.trim();
        console.log(input);
        for (const repl of replacements) {
          console.log("Handling " + repl.match);
          while (true) {
            old = input;
            input = input.replace(repl.match, repl.replace.random());
            if (old == input) {
              break
            }
          }
        }
        input = input.replace(/(^|\.\s+)([a-z])/gm, function(v) { console.log(v); return v.toUpperCase(); });
        document.getElementById('result').innerHTML = input;
      }

    </script>

  </body>

</html>
